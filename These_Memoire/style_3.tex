% !TEX encoding = IsoLatin
%cette premiÃère ligne permet au compilateur (souvent, dÃépend du compilateur) \LaTeX de reconnaitre l'encodage de votre fichier.
\documentclass[1pt,titlepage]{book}       %pour un livre
%\documentclass{report}
%\documentclass[a3, 10pt,twoside]{article}          %pour un article
%\documentclass[twocolumn,amsfonts,showpacs,superscriptaddress,nofootinbib,aps,nolongbibliography]{revtex4-2}

\usepackage{array,multirow,graphicx}
\usepackage[T1]{fontenc}  % For correct {}s in \texttt
\usepackage{accents}
\usepackage[french]{babel}
\let\dddot\relax
\let\ddddot\relax
\usepackage{amsmath, amssymb, amsthm}
\usepackage[utf8]{inputenc}
\usepackage{amstext, amsfonts, a4}
\usepackage{pgf,pgfarrows,pgfautomata,pgfheaps,pgfnodes,pgfshade}
\usepackage[left=0.05cm,right=0.05cm,top=0.05cm,bottom=0.05cm,nohead]{geometry}
\usepackage[pdfborder={0 0 0}]{hyperref}
\usepackage{xxcolor}
\usepackage{amscd}
\usepackage{dsfont}
\usepackage{float}
\usepackage[Glenn]{fncychap} % Rejne Glenn\chapter
%\usetikzlibrary{circuits.ee.IEC}
\usepackage{minitoc}  % Charge le package
\dominitoc  % Active l'affichage des mini-sommaires
\usepackage{lipsum} % pour générer du texte aléatoire
%\usepackage{makeidx}


%\usepackage[tikz]{bclogo}
\usepackage{mathrsfs}%lagrangien
\usepackage{stmaryrd} %\llbracket
\usepackage{bbold}%Matrice 11
\usepackage{shapepar}
\usepackage{cancel}
\usepackage{bm}
\usepackage{pdfpages}
\usepackage[utf8]{inputenc}
\usepackage{marvosym}
\usepackage{enumitem}
\usepackage{import} % Charger le package import
\usepackage{listings} % Pour afficher du code MATLAB
\usepackage{pgfplots}
\usetikzlibrary {datavisualization}
\usetikzlibrary {arrows.meta,bending,positioning}
\usetikzlibrary {datavisualization.formats.functions}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Pour le tag
%\usepackage[utf8]{inputenc}
%\usepackage{fourier}
\usepackage{mathtools}
%\usepackage{cleveref}
%\usepackage{xcolor}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%\usepackage{tzplot}

%\usepakage{pstriks}
\usepackage[utf8]{inputenc}

%PREAMBULE pour schÃéma
\usepackage{pgfplots}
\usepackage{tikz}
\usepackage[european resistor, european voltage, european current]{circuitikz}
\usetikzlibrary{arrows,shapes,positioning}
\usetikzlibrary{decorations.markings,decorations.pathmorphing,
decorations.pathreplacing}
\usetikzlibrary{calc,patterns,shapes.geometric}
%FIN PREAMBULE

% PREAMBULE pour vercteur derivÃé
\usepackage[b]{esvect}    % For \vv

%\usepackage{caption}
%\usepackage{subcaption}

%\usepackage{graphicx}

\usepackage{fullpage}
\usepackage{eso-pic}
\usepackage{enumitem}

%\usepackage{pgfplots}
%\pgfplotsset{compat=1.17}






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%%%%%%% Accent Math
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\newcommand*{\math@auxii}[2][3]{{}\mkern#1mu\overline{\mkern-#1mu#2}}
\newcommand*{\math@auxi}[3][3]{\overset{\mkern#1mu\text{\scalebox{0.7}{#3}}\mkern-#1mu}{\smash{\math@auxii[#1]{#2}}\vphantom{#2}}}
\newcommand*{\mathco}[2][3]{\math@auxi[#1]{#2}{$\circ$}}
\newcommand*{\mathabc}[2][3]{\math@auxi[#1]{#2}{abc}}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%algorithmes / pseudo code%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[french,ruled]{algorithm2e}

%%%%%
\usepackage{color,transparent}
%%%%%
%\usepackage{graphics,graphicx,subfigure,caption}
%\usepackage{graphics,graphicx,caption}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{comment}
\usepackage{float}
\setcounter{MaxMatrixCols}{30}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%        Dimensions du texte (ÃÂ  adapter selon votre goÃÂ»t/le goÃÂ»t de l'Ãéditeur)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setlength\textwidth{20.5cm}          % largeur du texte
\setlength\topmargin{-1cm}          % marge en haut
\setlength\evensidemargin{-2cm}     % marge de gauche
\setlength\textheight{22cm}         % hauteur du texte
\setlength\oddsidemargin{\evensidemargin}

%\geometry{a4paper, inner=3.5cm, outer=2.5cm, top=2.5cm, bottom=2.5cm, twoside} % proposition
\geometry{a4paper, right=0.5cm, left=0.5cm, top=0.5cm, bottom=1.5cm} % proposition
%\geometry{outer=2.5cm, top=2.5cm, bottom=2.5cm} % proposition




% Figures flottantes:
% fraction maximale d'une page pouvant etre occupe par une figure:
\renewcommand{\topfraction}{0.8}
% fraction minimale d'une page reservee pour le texte:
\renewcommand{\textfraction}{0.2}
% fraction minimale d'occupation de la page par une figure pleine page:
\renewcommand{\floatpagefraction}{0.7}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%         D\'ecoupage des mots           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\hyphenation{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Th\'eor\`emes, d\'efinitions, etc.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% Il y a diffÃérents types d'ÃénoncÃés qui mÃéritent un environnement spÃécifique, voici une liste assez exhaustive.
\theoremstyle{plain}
    \newtheorem{Theo}{Th\'eor\`eme}[section] %compteur commenÃÂ§ant par le numÃéro de la section (on pourrait aussi faire commencer par le numÃéro de la sous-section - remplacer "section" par "subsection")
    \newtheorem{Prop}[Theo]{Proposition}        %mÃême compteur que pour les thÃéorÃèmes
    \newtheorem{Prob}[Theo]{Probl\`eme}        %idem
    \newtheorem{Lemm}[Theo]{Lemme}            %etc...
    \newtheorem{Coro}[Theo]{Corollaire}
    \newtheorem{Propr}[Theo]{Propri\'et\'e}
    \newtheorem{Conj}[Theo]{ Conjecture}
    \newtheorem{Aff}[Theo]{Affirmation}

    \newtheorem{TheoPrinc}{Th\'eor\`eme}     %compteur spÃécifique pour les thÃéorÃèmes les plus importants du papier
        
\theoremstyle{definition}
    \newtheorem{Defi}[Theo]{D\'efinition}
    \newtheorem{Exem}[Theo]{Exemple}
    \newtheorem{Nota}[Theo]{\Large Notation}

\theoremstyle{remark}
    \newtheorem{Rema}[Theo]{Remarque}
    \newtheorem{NB}[Theo]{N.B.}
    \newtheorem{Comm}[Theo]{Commentaire}
    \newtheorem{question}[Theo]{$\ast$ Question}
    \newtheorem{exer}[Theo]{Exercice}
    \newtheorem{Consequence}[Theo]{Conséquence}
    \newtheorem{Rap}[Theo]{Rappel}
    \newtheorem*{Merci}{Remerciements}
    
\usepackage{mdframed}

\mdfdefinestyle{propstyle}{%
linecolor=black,linewidth=2pt,%
hidealllines=true,
frametitlerule=true,%
frametitlebackgroundcolor=gray!20,
backgroundcolor=gray!10!white,
roundcorner=5pt,
innertopmargin=\topskip,
}

%\mdtheorem[style=propstyle]{prop}{Property}[chapter]
\mdtheorem[style=propstyle]{lemma}[prop]{Lemma}
\mdtheorem[style=propstyle]{TheoPrinc}{Th\'eor\`eme}[chapter]

% Définition d'un style personnalisé pour les Affirmations
\mdfdefinestyle{affirmestyle}{%
    linecolor=gray, % Couleur de la bordure
    linewidth=1pt, % Épaisseur de la bordure
    backgroundcolor=gray!10, % Couleur de fond (gris clair)
    roundcorner=5pt, % Coins arrondis
    innertopmargin=0pt, % Marge intérieure au-dessus du cadre
    innerbottommargin=10pt, % Marge intérieure en-dessous du cadre
    innerleftmargin=10pt, % Marge intérieure à gauche
    innerrightmargin=10pt, % Marge intérieure à droite
    skipabove=10pt, % Espace au-dessus du cadre
    skipbelow=10pt % Espace en-dessous du cadre
}

% Définition de l'environnement Affirmation
\theoremstyle{definition} % Style de théorème pour les affirmations
\newmdtheoremenv[style=affirmestyle]{aff}{Point clé n$^{\circ}$} % Environnement Affirmation avec le style personnalisé
    



\usepackage{scalerel}
\usepackage{xcolor}
\usepackage{stackengine}
\usepgflibrary {shadings}


\usetikzlibrary {decorations.pathmorphing}

\newcommand\dangersign[1]{%
    \renewcommand\stacktype{L}%
    \scaleto{\stackon[1.3pt]{\color{red}$\triangle$}{\tiny !}}{#1}%
}

\usepackage{tikz}
\tikzset{every picture/.style={execute at begin picture={\shorthandoff{:;!?};}}}
\tikzstyle{every picture}+=[remember picture]
\tikzstyle{na} = [shape=rectangle,inner sep=0pt]

% Commandes pour les flèches textuelles
\newcommand{\ptFleche}[2]{        % Déclaration d'une extrémité de flèche
    \tikz[baseline=(#1.base)]\node[na](#1){#2};
  }
%\newcommand{\Fleche}[5][thick]{    % Dessin de la flèche
%    \begin{tikzpicture}[overlay]
%        \path[->,#1](#2) edge [out=#4, in=#5] (#3);
%    \end{tikzpicture}
%  }
  
% \newcommand{\Flecheprim}[5][thick]{    % Dessin de la flèche
%    \begin{tikzpicture}[overlay]
%        \path[->,#1](#2) edge [out=#4, in=#5] (#3);
%    \end{tikzpicture}
%  }
%
\usepackage{marvosym}
\usepackage{changepage}

\usepackage{minitoc}
\usepackage{tocloft}
%\renewcommand{\cfttoctitle}{\hspace{-2em}}
% Nastaveni obsahu
% Nastaveni obsahu

\usepackage{imakeidx}
\usepackage{fancyhdr}

%\usepackage{makeidx}
\makeindex[intoc=true]
\makeindex[name=pers, title=Index of person names, intoc=true]

\usepackage{xcolor}
\definecolor{linkcolor}{RGB}{0,0,180}
\PassOptionsToPackage{
    colorlinks=true,
    linkcolor=linkcolor,
    citecolor=linkcolor,
    urlcolor=linkcolor
}{hyperref}
\usepackage{hyperref}

%%%%%%%%%%%%%%%%%%%%%
%\definecolor{linkcolor}{RGB}{0,0,180}
\usepackage{titlesec}

% Appliquer la couleur à tous les niveaux de titre
\titleformat{\section}{\normalfont\color{linkcolor!90!black}\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\color{linkcolor!70!black}\large\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalfont\color{linkcolor!50!black}\normalsize\bfseries}{\thesubsubsection}{1em}{}
\titleformat{\paragraph}[runin]{\normalfont\color{linkcolor!30!black}\bfseries}{\theparagraph}{1em}{}
\titleformat{\subparagraph}[runin]{\normalfont\color{linkcolor!10!black}\itshape}{\thesubparagraph}{1em}{}
%%%%%%%%%%%%%%%%%%%%%%%

%%Couleurs dans la table des matières

\usepackage{tocloft}

% Modifier la couleur des entrées de la TOC
\renewcommand{\cftsecfont}{\color{linkcolor!90!black}}
\renewcommand{\cftsubsecfont}{\color{linkcolor!70!black}}
\renewcommand{\cftsubsubsecfont}{\color{linkcolor!50!black}}
\renewcommand{\cftparafont}{\color{linkcolor!30!black}}
\renewcommand{\cftsubparafont}{\color{linkcolor!10!black}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Reglages:
%
%\pagestyle{fancyplain}
%\addtolength{\headwidth}{\marginparsep}
%\addtolength{\headwidth}{\marginparwidth}
%\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
%\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
%\lhead[\fancyplain{}{\bfseries\thepage}]{}
%\rhead[]{\fancyplain{}{\bfseries\thepage}}
%\chead[\fancyplain{}{\bfseries\leftmark}]{\fancyplain{}{\bfseries\rightmark}}
%\cfoot{}
%

%usepackage{titlesec}
% Changer la couleur des paragraphes en rouge par exemple :
%\titleformat{\paragraph}[runin] % ou [block] selon ce que tu veux
%  {\normalfont\color{red}\bfseries}
%  {\theparagraph}{1em}{}

%%% ===== Index principal + index secondaire (noms propres) =====
\makeindex[intoc=true]
\makeindex[name=pers, title=Index des noms propres, intoc=true]

%%% ===== Couleur des liens =====
\definecolor{linkcolor}{RGB}{0,0,180}
\PassOptionsToPackage{
    colorlinks=true,
    linkcolor=linkcolor,
    citecolor=linkcolor,
    urlcolor=linkcolor
}{hyperref}
\usepackage{hyperref}

%%% ===== Réglages hyperref =====
\hypersetup{
  pdftitle={Étude de la dynamique hors équilibre de bosons unidimensionnels},
  pdfsubject={Quantum Physics},
  pdfauthor={Guillaume THEMEZE <guillaume.themeze@gmail.fr>},
  pdfkeywords={LaTeX, quantum, bosons, dynamique},
  colorlinks=true
}

%%% ===== Style des titres (colorés) =====
\titleformat{\chapter}[display]{\normalfont\sffamily\huge\bfseries\color{black}}{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titleformat{\section}{\normalfont\color{linkcolor!90!black}\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\color{linkcolor!70!black}\large\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalfont\color{linkcolor!50!black}\normalsize\bfseries}{\thesubsubsection}{1em}{}
\titleformat{\paragraph}[runin]{\normalfont\color{linkcolor!30!black}\bfseries}{\theparagraph}{1em}{}
\titleformat{\subparagraph}[runin]{\normalfont\color{linkcolor!10!black}\itshape}{\thesubparagraph}{1em}{}

%%% ===== Couleurs de la table des matières =====
\renewcommand{\cftsecfont}{\color{linkcolor!90!black}}
\renewcommand{\cftsubsecfont}{\color{linkcolor!70!black}}
\renewcommand{\cftsubsubsecfont}{\color{linkcolor!50!black}}
\renewcommand{\cftparafont}{\color{linkcolor!30!black}}
\renewcommand{\cftsubparafont}{\color{linkcolor!10!black}}

%%% ===== En-têtes et pieds de page =====
\pagestyle{fancy}
\fancyhf{}
\setlength{\headheight}{14pt}

\fancyhead[RO,LE]{\thepage}
\fancyhead[LO]{\scshape \nouppercase{\rightmark}}  % Section
\fancyhead[RE]{\scshape \nouppercase{\leftmark}}  % Chapitre
\renewcommand{\headrulewidth}{.4pt}

\fancyfoot[L]{Thèse}
\fancyfoot[R]{Palaiseau 2022 -- 2025}
\renewcommand{\footrulewidth}{.4pt}

% Supprimer les numéros sur la première page de chaque chapitre
\makeatletter
\let\ps@plain=\ps@empty
\makeatother

%%% ===== Réglages des titres de sections dans les en-têtes =====
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}

%%% ===== Notes de bas de page à la française =====
\usepackage[french]{babel}
%\usepackage[frenchfootnotes]{french}
%\FrenchFootnotes
%\AddThinSpaceBeforeFootnotes

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\operatorvec}[1]{\hat{{\bm{#1}}}} % pour les operateur
\newcommand{\operator}[1]{\hat{\bm{#1}}} % pour les operaeur vecteur
\newcommand{\operatormat}[1]{\operatorname{#1}} % pour les operaeur vecteur
\newcommand{\operatortilde}[1]{\tilde{\bm{#1}}} % pour les opetateur avec un tilde
\newcommand{\operatortildevec}[1]{\tilde{\bm{#1}}}% pour les opetateur avec un tilde et vecteur
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

