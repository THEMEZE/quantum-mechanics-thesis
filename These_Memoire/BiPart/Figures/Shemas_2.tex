\documentclass{standalone} % Utilise la classe standalone pour compiler uniquement le TikZ
%\include{pakage_tikz}
\usepackage{tikz}          % Charge le package TikZ
\usepackage{xcolor}        % Gestion avancée des couleurs
\usepackage{amsmath}       % Gestion des formules mathématiques
\usetikzlibrary{arrows.meta} % Pour gérer les flèches avec des formes spécifiées comme "triangle"
\usetikzlibrary{decorations.pathmorphing}
\usepackage{pgfplots}
%\pgfplotsset{compat=1.18}
\usepackage[active,tightpage]{preview}
\PreviewEnvironment{tikzpicture}
\setlength\PreviewBorder{5pt}
%\usepgfplotslibrary{external}
%\tikzexternalize

\usetikzlibrary{3d,calc}
\usetikzlibrary{perspective}


%% Automatiser cela : une solution plus élégante  nouvelle page, tu peux utiliser la commande \newpage juste avant chaque \begin{tikzpicture}
%\let\oldtikzpicture\tikzpicture
%\let\endoldtikzpicture\endtikzpicture
%\renewenvironment{tikzpicture}{\newpage\oldtikzpicture}{\endoldtikzpicture}
%\usepackage{etoolbox} % dans le préambule, si pas encore utilisé
%\pretocmd{\tikzpicture}{\clearpage}{}{}





\newcommand{\Palette}[1][\colorOne]{
	\clip[decorate, decoration={random steps, segment length=3pt, amplitude=3pt}]
        	(-1,-1) rectangle (1,1);
	\draw[fill=#1 , color = #1 ] (-2,-2) rectangle (2,2);
}






% Définition des couleurs avec les codes HTML
\definecolor{colorOne}{HTML}{443E46}
%\definecolor{colorTwo}{HTML}{F6DEB8}
\definecolor{colorTwo}{HTML}{FFFFFF}
\definecolor{colorThree}{HTML}{908CA4}
\definecolor{colorFour}{HTML}{57659E}
\definecolor{colorFive}{HTML}{C57284}
\definecolor{colorSix}{HTML}{FF5B69}

% Raccourcis pour les couleurs
\def\colorOne{colorOne}
\def\colorTwo{colorTwo}
\def\colorThree{colorThree}
\def\colorFour{colorFour}
\def\colorFive{colorFive}
\def\colorSix{colorSix}







%Palette 
\newcommand{\Palettes}[0]{
%\begin{tikzpicture}	
	\node at (0,0) [rectangle, ] {
		\begin{tikzpicture}
			\Palette[\colorOne]
		\end{tikzpicture}} ;
	\node at (3,0) [rectangle, ] {
		\begin{tikzpicture}
			\Palette[\colorTwo]
		\end{tikzpicture}} ;
	\node at (6,0) [rectangle, ] {
		\begin{tikzpicture}
			\Palette[\colorThree]
		\end{tikzpicture}} ;
	\node at (9,0) [rectangle, ] {
		\begin{tikzpicture}
			\Palette[\colorFour]
		\end{tikzpicture}} ;
	\node at (12,0) [rectangle, ] {
		\begin{tikzpicture}
			\Palette[\colorFive]
		\end{tikzpicture}} ;
	\node at (15,0) [rectangle, ] {
		\begin{tikzpicture}
			\Palette[\colorSix]
		\end{tikzpicture}} ;
%\end{tikzpicture}
}



\begin{document}


% Palettes
\begin{tikzpicture}
	\node at (40,6) [rectangle , rotate = -90] { \tikz \Palettes  ;}; 	
\end{tikzpicture}

\begin{tikzpicture}
  \node[draw] at (0,0) {Setting the view};
\end{tikzpicture}

\begin{tikzpicture}[3d view]
  \draw[->] (-1,0,0) -- (1,0,0) node[pos=1.1]{x};
  \draw[->] (0,-1,0) -- (0,1,0) node[pos=1.1]{y};
  \draw[->] (0,0,-1) -- (0,0,1) node[pos=1.1]{z};
\end{tikzpicture}

\begin{tikzpicture}[isometric view]
  \draw[->] (-1,0,0) -- (1,0,0) node[pos=1.1]{x};
  \draw[->] (0,-1,0) -- (0,1,0) node[pos=1.1]{y};
  \draw[->] (0,0,-1) -- (0,0,1) node[pos=1.1]{z};
\end{tikzpicture}


\begin{tikzpicture}
  \node[draw] at (0,0) {Defining the perspective};
\end{tikzpicture}

\newcommand\simplecuboid[3]{%
  \fill[gray!80!white] (tpp cs:x=0,y=0,z=#3)
    -- (tpp cs:x=0,y=#2,z=#3)
    -- (tpp cs:x=#1,y=#2,z=#3)
    -- (tpp cs:x=#1,y=0,z=#3) -- cycle;
  \fill[gray]  (tpp cs:x=0,y=0,z=0)
    -- (tpp cs:x=0,y=0,z=#3)
    -- (tpp cs:x=0,y=#2,z=#3)
    -- (tpp cs:x=0,y=#2,z=0) -- cycle;
  \fill[gray!50!white] (tpp cs:x=0,y=0,z=0)
    -- (tpp cs:x=0,y=0,z=#3)
    -- (tpp cs:x=#1,y=0,z=#3)
    -- (tpp cs:x=#1,y=0,z=0) -- cycle;}
\newcommand{\simpleaxes}[3]{%
  \draw[->] (-0.5,0,0) -- (#1,0,0) node[pos=1.1]{x};
  \draw[->] (0,-0.5,0) -- (0,#2,0) node[pos=1.1]{y};
  \draw[->] (0,0,-0.5) -- (0,0,#3) node[pos=1.1]{z};}

\begin{tikzpicture}[3d view]
  \simplecuboid{2}{2}{2}
  \simpleaxes{2}{2}{2}
\end{tikzpicture}

\begin{tikzpicture}[3d view,perspective]
  \simplecuboid{2}{2}{2}
  \simpleaxes{2}{2}{2}
\end{tikzpicture}

\begin{tikzpicture}[
  3d view,
  perspective={
    p = {(5,0,0)}}]
  \simplecuboid{2}{2}{2}
  \simpleaxes{2}{2}{2}
\end{tikzpicture}

\begin{tikzpicture}[
  3d view,
  perspective={
    p = {(5,1,0)}}]
  \simplecuboid{2}{2}{2}
  \simpleaxes{2}{2}{2}
\end{tikzpicture}

\begin{tikzpicture}[
  3d view,
  perspective={
    p = {(5,1,1)}}]
  \simplecuboid{2}{2}{2}
  \simpleaxes{2}{2}{2}
\end{tikzpicture}

\begin{tikzpicture}[
  3d view,
  perspective={
    q = {(0,5,0)}}]
  \simplecuboid{2}{2}{2}
  \simpleaxes{2}{2}{2}
\end{tikzpicture}

\begin{tikzpicture}[
  3d view,
  perspective={
    r = {(0,0,5)}}]
  \simplecuboid{2}{2}{2}
  \simpleaxes{2}{2}{2}
\end{tikzpicture}

\begin{tikzpicture}
  \node[draw] at (0,0) {Lacunes};
\end{tikzpicture}

\begin{tikzpicture}
  \node[draw] at (0,0) {Examples};
\end{tikzpicture}

\begin{tikzpicture}[
  isometric view,
  perspective={
    p = {(8,0,0)},
    q = {(0,8,0)},
    r = {(0,0,-8)}}]

  \simplecuboid{2}{2}{2}

\end{tikzpicture}

\begin{tikzpicture}[
  isometric view,
  perspective={
    p = {(4,0,0)},
    q = {(0,4,0)}}]

    \node[fill=red,circle,inner sep=1.5pt,label=above:p] at (4,0,0){};

    \foreach \i in {0,...,100}{
      \filldraw[fill = gray] (tpp cs:x=\i,y=0,z=0)
        -- (tpp cs:x=\i+0.5,y=0,z=0)
        -- (tpp cs:x=\i+0.5,y=2,z=0)
        -- (tpp cs:x=\i,y=2,z=0)
        -- cycle;}
\end{tikzpicture}

\begin{tikzpicture}[
  scale=0.7,
  3d view,
  perspective={
    p = {(20,0,0)},
    q = {(0,20,0)}}]

  \filldraw[fill=brown] (tpp cs:x=0,y=0,z=0)
    -- (tpp cs:x=0,y=4,z=0)
    -- (tpp cs:x=0,y=4,z=2)
    -- (tpp cs:x=0,y=2,z=4)
    -- (tpp cs:x=0,y=0,z=2) -- cycle;
  \filldraw[fill=red!70!black] (tpp cs:x=0,y=0,z=2)
    -- (tpp cs:x=5,y=0,z=2)
    -- (tpp cs:x=5,y=2,z=4)
    -- (tpp cs:x=0,y=2,z=4) -- cycle;
  \filldraw[fill=brown!80!white] (tpp cs:x=0,y=0,z=0)
    -- (tpp cs:x=0,y=0,z=2)
    -- (tpp cs:x=5,y=0,z=2)
    -- (tpp cs:x=5,y=0,z=0) -- cycle;
\end{tikzpicture}


\begin{tikzpicture}[
  3d view,
  perspective={
    p = {(2,0,0)},
    q = {(0,2,0)},
    r = {(0,0,2)}},
  scale=4,
  vanishing point/.style={fill,circle,inner sep=2pt}]

  \simplecuboid{3}{1}{2}

  \node[vanishing point,label = right:p] (p) at (2,0,0){};
  \node[vanishing point,label = left:q] (q) at (0,2,0){};
  \node[vanishing point,label = above:r] (r) at (0,0,2){};

  \begin{scope}[dotted]
    \foreach \y in {0,1}{
      \foreach \z in {0,2}{
        \draw (tpp cs:x=0,y=\y,z=\z) -- (p.center);}}
    \foreach \x in {0,3}{
      \foreach \z in {0,2}{
        \draw (tpp cs:x=\x,y=0,z=\z) -- (q.center);}}
    \foreach \x in {0,3}{
      \foreach \y in {0,1}{
        \draw (tpp cs:x=\x,y=\y,z=0) -- (r.center);}}
  \end{scope}
\end{tikzpicture}



\begin{tikzpicture}
	\clip (-11 , -11) rectangle (15 , 11) ;
    %\InsitutDiagram
    %\drawgrid{-11}{15}{-11}{11}
    %\draw[line width=2.5ex , color = red ] (-11 , -11) rectangle (15 , 11) ;
    \path (-11 , -11) rectangle (15 , 11);
\end{tikzpicture}

\begin{tikzpicture}[
  3d view={20}{35.26},
  perspective={
    p = {(2,0,0)},
    q = {(0,2,0)},
    r = {(0,0,2)}},
  scale=4,
  vanishing point/.style={fill,circle,inner sep=2pt}]
  
  % Initialisation des points de fuite (doit être dans le tikzpicture)
  \coordinate (Pp) at (2,0,0);
  \coordinate (Pq) at (0,2,0);
  \coordinate (Pr) at (0,0,2);

  \simplecuboid{3}{1}{2}
  
  \filldraw[fill=brown] (tpp cs:x=0,y=0,z=0)
    -- (tpp cs:x=0,y=4,z=0)
    -- (tpp cs:x=0,y=4,z=2)
    -- (tpp cs:x=0,y=2,z=4)
    -- (tpp cs:x=0,y=0,z=2) -- cycle;
  \filldraw[fill=red!70!black] (tpp cs:x=0,y=0,z=2)
    -- (tpp cs:x=5,y=0,z=2)
    -- (tpp cs:x=5,y=2,z=4)
    -- (tpp cs:x=0,y=2,z=4) -- cycle;
  \filldraw[fill=brown!80!white] (tpp cs:x=0,y=0,z=0)
    -- (tpp cs:x=0,y=0,z=2)
    -- (tpp cs:x=5,y=0,z=2)
    -- (tpp cs:x=5,y=0,z=0) -- cycle;
    
  \simpleaxes{2}{2}{2}

  \node[vanishing point,label = right:p] (p) at (Pp){};
  \node[vanishing point,label = left:q] (q) at (Pq){};
  \node[vanishing point,label = above:r] (r) at (Pr){};

  \begin{scope}[dotted]
    \foreach \y in {0,1}{
      \foreach \z in {0,2}{
        \draw (tpp cs:x=0,y=\y,z=\z) -- (p.center);}}
    \foreach \x in {0,3}{
      \foreach \z in {0,2}{
        \draw (tpp cs:x=\x,y=0,z=\z) -- (q.center);}}
    \foreach \x in {0,3}{
      \foreach \y in {0,1}{
        \draw (tpp cs:x=\x,y=\y,z=0) -- (r.center);}}
  \end{scope}
\end{tikzpicture}

\begin{tikzpicture}
	\clip (-11 , -11) rectangle (15 , 11) ;
    %\InsitutDiagram
    %\drawgrid{-11}{15}{-11}{11}
    %\draw[line width=2.5ex , color = red ] (-11 , -11) rectangle (15 , 11) ;
    \path (-11 , -11) rectangle (15 , 11);
\end{tikzpicture}

\begin{tikzpicture}[
  3d view={-45}{35.26},
  perspective={
    p = {(10,0,0)},
    q = {(0,10,0)},
    r = {(0,0,20)}},
  scale=4,
  vanishing point/.style={fill,circle,inner sep=2pt}]
  
  % Initialisation des points de fuite (doit être dans le tikzpicture)
  \coordinate (Pp) at (10,0,0);
  \coordinate (Pq) at (0,10,0);
  \coordinate (Pr) at (0,0,20);

  \simplecuboid{3}{1}{2}
  
  \filldraw[ shift={(0,0)} , fill=brown ,line width=1ex,rounded corners = 1.5ex, color=blue,] (tpp cs:x=0,y=0,z=0)
    -- (tpp cs:x=0,y=4,z=0)
    -- (tpp cs:x=0,y=4,z=2)
    -- (tpp cs:x=0,y=2,z=4)
    -- (tpp cs:x=0,y=0,z=2) -- cycle;
  \filldraw[fill=red!70!black] (tpp cs:x=0,y=0,z=2)
    -- (tpp cs:x=5,y=0,z=2)
    -- (tpp cs:x=5,y=2,z=4)
    -- (tpp cs:x=0,y=2,z=4) -- cycle;
  \filldraw[fill=brown!80!white] (tpp cs:x=0,y=0,z=0)
    -- (tpp cs:x=0,y=0,z=2)
    -- (tpp cs:x=5,y=0,z=2)
    -- (tpp cs:x=5,y=0,z=0) -- cycle;
    
  \simpleaxes{2}{2}{2}

  \node[vanishing point,label = right:p] (p) at (Pp){};
  \node[vanishing point,label = left:q] (q) at (Pq){};
  \node[vanishing point,label = above:r] (r) at (Pr){};

  \begin{scope}[dotted]
    \foreach \y in {0,1}{
      \foreach \z in {0,2}{
        \draw (tpp cs:x=0,y=\y,z=\z) -- (p.center);}}
    \foreach \x in {0,3}{
      \foreach \z in {0,2}{
        \draw (tpp cs:x=\x,y=0,z=\z) -- (q.center);}}
    \foreach \x in {0,3}{
      \foreach \y in {0,1}{
        \draw (tpp cs:x=\x,y=\y,z=0) -- (r.center);}}
  \end{scope}
\end{tikzpicture}


% Arguments :
% #1 = variable fixe (x, y ou z)
% #2 = valeur constante de la variable fixe
% #3 = borne min (1D)
% #4 = borne max (1D)
% #5 = borne min (2D)
% #6 = borne max (2D)

\newcommand{\drawgridxyzz}[6]{%
  \begin{scope}[opacity=0.9]
    % Grille principale (pas = 1)
    \foreach \i in {#3,...,#4} {
      \draw[very thin, gray] 
        (tpp cs:#1=#2,%
          \ifx#1x y=\i,z=#5 \fi%
          \ifx#1y x=\i,z=#5 \fi%
          \ifx#1z x=\i,y=#5 \fi) --
        (tpp cs:#1=#2,%
          \ifx#1x y=\i,z=#6 \fi%
          \ifx#1y x=\i,z=#6 \fi%
          \ifx#1z x=\i,y=#6 \fi);
    }
    \foreach \j in {#5,...,#6} {
      \draw[very thin, gray]
        (tpp cs:#1=#2,%
          \ifx#1x y=#3,z=\j \fi%
          \ifx#1y x=#3,z=\j \fi%
          \ifx#1z x=#3,y=\j \fi) --
        (tpp cs:#1=#2,%
          \ifx#1x y=#4,z=\j \fi%
          \ifx#1y x=#4,z=\j \fi%
          \ifx#1z x=#4,y=\j \fi);
    }
  \end{scope}
}

% Définition de la fonction pour générer la grille
\newcommand{\drawgrid}[4]{


	\begin{scope}[opacity = 0.2]
	
	
    	% Paramètres : #1=xmin, #2=xmax, #3=ymin, #4=ymax

   	 	% Grille principale en cm
    	\draw[very thin, gray] (#1,#3) grid (#2,#4); % Grille de base (1 cm)
    
    	\draw[very thin, gray] (#1,#3) grid[step=0.1] (#2,#4);

    	\draw[thin, black] (#1,#3) edge[thick,line width=0.8ex,->,>=Stealth ] (#2,#3); 
    
    	\foreach \x in {#1,..., #2} {
        	\draw[shift={(\x, #3)}] (0,-0.1) edge[line width=0.8ex] node[pos = -1 , below] {\x} (0,0.1); % Lignes verticales en mm
    	}

    	\draw[thin, black] (#1,#3)edge[thick,line width=0.8ex,->,>=Stealth ] (#1,#4); 
    
    	\foreach \y in {#3,..., #4} {
        	\draw[shift={(#1, \y)}] (-0.1 , 0 ) edge[line width=0.8ex] node[pos = -1 , left ] {\y} (0.1 , 0); % Lignes verticales en mm
    	}
    
    \end{scope}


}


% Grille 3D dans un plan à coordonnée constante (x, y ou z)
% #1 : variable fixe (x, y ou z)
% #2 : valeur fixe de cette variable
% #3 : min de la première coordonnée (variante1)
% #4 : max de la première coordonnée (variante1)
% #5 : min de la seconde coordonnée (variante2)
% #6 : max de la seconde coordonnée (variante2)

\newcommand{\drawgridxyzzz}[6]{%
  \begin{scope}[opacity=0.5]
  
  \pgfmathtruncatemacro{\imax}{#4 - 1}
  \pgfmathtruncatemacro{\jmax}{#6 - 1}
   % Valeurs flottantes pour les graduations
  \pgfmathsetmacro{\itraiminus}{#5 - 0.1}
  \pgfmathsetmacro{\itraiplus}{#5 + 0.1}
  \pgfmathsetmacro{\jtraiminus}{#3 - 0.1}
  \pgfmathsetmacro{\jtraiplus}{#3 + 0.1}
  

  % Petite grille millimétrée (pas = 0.1)
  \foreach \i in {#3, ..., \imax} {
    \foreach \di in {0.1,0.2,...,0.9} {
      \pgfmathsetmacro{\iiTemp}{\i+\di}
      \edef\ii{\iiTemp}
      \draw[very thin, gray!50] 
        (tpp cs:#1=#2,%
          \ifx#1x y=\ii,z=#5 \fi%
          \ifx#1y x=\ii,z=#5 \fi%
          \ifx#1z x=\ii,y=#5 \fi) --
        (tpp cs:#1=#2,%
          \ifx#1x y=\ii,z=#6 \fi%
          \ifx#1y x=\ii,z=#6 \fi%
          \ifx#1z x=\ii,y=#6 \fi);
    }
  }

  \foreach \j in {#5, ..., \jmax} {
    \foreach \dj in {0.1,0.2,...,0.9} {
      \pgfmathsetmacro{\jjTemp}{\j+\dj}
      \edef\jj{\jjTemp}
      \draw[very thin, gray!50] 
        (tpp cs:#1=#2,%
          \ifx#1x y=#3,z=\jj \fi%
          \ifx#1y x=#3,z=\jj \fi%
          \ifx#1z x=#3,y=\jj \fi) --
        (tpp cs:#1=#2,%
          \ifx#1x y=#4,z=\jj \fi%
          \ifx#1y x=#4,z=\jj \fi%
          \ifx#1z x=#4,y=\jj \fi);
    }
  }

  % Grille principale (pas = 1)
  \foreach \i in {#3,...,#4} {
    \draw[very thin, gray] 
      (tpp cs:#1=#2,%
        \ifx#1x y=\i,z=#5 \fi%
        \ifx#1y x=\i,z=#5 \fi%
        \ifx#1z x=\i,y=#5 \fi) --
      (tpp cs:#1=#2,%
        \ifx#1x y=\i,z=#6 \fi%
        \ifx#1y x=\i,z=#6 \fi%
        \ifx#1z x=\i,y=#6 \fi);
  }

  \foreach \j in {#5,...,#6} {
    \draw[very thin, gray]
      (tpp cs:#1=#2,%
        \ifx#1x y=#3,z=\j \fi%
        \ifx#1y x=#3,z=\j \fi%
        \ifx#1z x=#3,y=\j \fi) --
      (tpp cs:#1=#2,%
        \ifx#1x y=#4,z=\j \fi%
        \ifx#1y x=#4,z=\j \fi%
        \ifx#1z x=#4,y=\j \fi);
  }

  % Axe 1
  \draw[thick,line width=0.8ex,->,>=Stealth ] 
    (tpp cs:#1=#2,%
      \ifx#1x y=#3,z=#5 \fi%
      \ifx#1y x=#3,z=#5 \fi%
      \ifx#1z x=#3,y=#5 \fi) --
    (tpp cs:#1=#2,%
      \ifx#1x y=#4,z=#5 \fi%
      \ifx#1y x=#4,z=#5 \fi%
      \ifx#1z x=#4,y=#5 \fi);

  % Axe 2
  \draw[thick,line width=0.8ex,->,>=Stealth ] 
    (tpp cs:#1=#2,%
      \ifx#1x y=#3,z=#5 \fi%
      \ifx#1y x=#3,z=#5 \fi%
      \ifx#1z x=#3,y=#5 \fi) --
    (tpp cs:#1=#2,%
      \ifx#1x y=#3,z=#6 \fi%
      \ifx#1y x=#3,z=#6 \fi%
      \ifx#1z x=#3,y=#6 \fi);

 % Graduation sur axe 1 (avec petit trait)
\foreach \i in {#3,...,#4} {
  % Petit trait de graduation
  %\draw[gray, line width=0.8ex] 
  %  (tpp cs:#1=#2,%
  %    \ifx#1x y=\i,z=#5 \fi%
  %    \ifx#1y x=\i,z=#5 \fi%
  %    \ifx#1z x=\i,y=#5 \fi) --
  %  ++(
  %    \ifx#1x 0pt, -2pt \fi%
  %    \ifx#1y -2pt, 0pt \fi%
  %    \ifx#1z -2pt, 0pt \fi);
  %\draw[gray, line width=0.8ex] 
  %  (tpp cs:#1=#2,%
  %    \ifx#1x y=\i,z=#5 \fi%
  %    \ifx#1y x=\i,z=#5 \fi%
  %    \ifx#1z x=\i,y=#5 \fi) --
  %  ++(
  %    \ifx#1x 0pt, +2pt \fi%
  %    \ifx#1y +2pt, 0pt \fi%
  %    \ifx#1z +2pt, 0pt \fi);

  % Texte de graduation
 % \node[font=\large, anchor=north] at 
 %   (tpp cs:#1=#2,%
 %     \ifx#1x y=\i,z=#5 \fi%
 %     \ifx#1y x=\i,z=#5 \fi%
 %     \ifx#1z x=\i,y=#5 \fi) {\i};
      
  %\draw[
  %	shift={
  %		(tpp cs:#1=#2,%
  %    		\ifx#1x y=\i,z=#5 \fi%
  %    		\ifx#1y x=\i,z=#5 \fi%
  %    		\ifx#1z x=\i,y=#5 \fi)
  %		}
  %	] 
  %	(tpp cs:#1=#2,%
  %    	\ifx#1x y=\i,z=-0.1 \fi%
  %    	\ifx#1y x=\i,z=-0.1 \fi%
  %    	\ifx#1z x=\i,y=-0.1 \fi
  %    ) 
  %		edge[line width=0.8ex] node[pos = -1 , left ] {\i} 
  %	(tpp cs:#1=#2,%
  %    	\ifx#1x y=\i,z=0.1 \fi%
  %    	\ifx#1y x=\i,z=0.1 \fi%
  %    	\ifx#1z x=\i,y=0.1 \fi
  %    ) ; % Lignes verticales en mm
      
   \draw[
  	%shift={
  	%	(tpp cs:#1=#2,%
    %  		\ifx#1x y=\i,z=#5 \fi%
    %  		\ifx#1y x=\i,z=#5 \fi%
    %  		\ifx#1z x=\i,y=#5 \fi)
  	%	}
  	]
      (tpp cs:#1=#2,%
        \ifx#1x y=\i,z=\itraiminus \fi%
        \ifx#1y x=\i,z=\itraiminus \fi%
        \ifx#1z x=\i,y=\itraiminus \fi) edge[line width=0.8ex] node[pos = -0 , left ] {\i}
      (tpp cs:#1=#2,%
        \ifx#1x y=\i,z=\itraiplus \fi%
        \ifx#1y x=\i,z=\itraiplus \fi%
        \ifx#1z x=\i,y=\itraiplus \fi);
}


  % Graduation axe 2
  \foreach \j in {#5,...,#6} {
  	 % Petit trait de graduation
  \draw[
  	%shift={
  	%	(tpp cs:#1=#2,%
    %  		\ifx#1x y=\i,z=#5 \fi%
    %  		\ifx#1y x=\i,z=#5 \fi%
    %  		\ifx#1z x=\i,y=#5 \fi)
  	%	}
  	]
      (tpp cs:#1=#2,%
        \ifx#1x z=\j,y=\jtraiminus \fi%
        \ifx#1y z=\j,x=\jtraiminus \fi%
        \ifx#1z y=\j,x=\jtraiminus \fi) edge[line width=0.8ex] node[pos = -0 , left ] {\j}
      (tpp cs:#1=#2,%
        \ifx#1x z=\j,y=\jtraiplus \fi%
        \ifx#1y z=\j,x=\jtraiplus \fi%
        \ifx#1z y=\j,x=\jtraiplus \fi);
}

  \end{scope}
}

\newcommand{\drawgridxyz}[6]{%
  \begin{scope}[opacity=0.5]
  
  \pgfmathtruncatemacro{\imax}{#4 - 1}
  \pgfmathtruncatemacro{\jmax}{#6 - 1}
   % Valeurs flottantes pour les graduations
  \pgfmathsetmacro{\itraiminus}{#5 - 0.1}
  \pgfmathsetmacro{\itraiplus}{#5 + 0.1}
  \pgfmathsetmacro{\jtraiminus}{#3 - 0.1}
  \pgfmathsetmacro{\jtraiplus}{#3 + 0.1}
  

  % Petite grille millimétrée (pas = 0.1)
  \foreach \i in {#3, ..., \imax} {
    \foreach \di in {0.1,0.2,...,0.9} {
      \pgfmathsetmacro{\iiTemp}{\i+\di}
      \edef\ii{\iiTemp}
      \draw[very thin, gray!50] 
        (tpp cs:#1=#2,%
          \ifx#1x y=\ii,z=#5 \fi%
          \ifx#1y x=\ii,z=#5 \fi%
          \ifx#1z x=\ii,y=#5 \fi) --
        (tpp cs:#1=#2,%
          \ifx#1x y=\ii,z=#6 \fi%
          \ifx#1y x=\ii,z=#6 \fi%
          \ifx#1z x=\ii,y=#6 \fi);
    }
  }

  \foreach \j in {#5, ..., \jmax} {
    \foreach \dj in {0.1,0.2,...,0.9} {
      \pgfmathsetmacro{\jjTemp}{\j+\dj}
      \edef\jj{\jjTemp}
      \draw[very thin, gray!50] 
        (tpp cs:#1=#2,%
          \ifx#1x y=#3,z=\jj \fi%
          \ifx#1y x=#3,z=\jj \fi%
          \ifx#1z x=#3,y=\jj \fi) --
        (tpp cs:#1=#2,%
          \ifx#1x y=#4,z=\jj \fi%
          \ifx#1y x=#4,z=\jj \fi%
          \ifx#1z x=#4,y=\jj \fi);
    }
  }

  % Grille principale (pas = 1)
  \foreach \i in {#3,...,#4} {
    \draw[very thin, gray] 
      (tpp cs:#1=#2,%
        \ifx#1x y=\i,z=#5 \fi%
        \ifx#1y x=\i,z=#5 \fi%
        \ifx#1z x=\i,y=#5 \fi) --
      (tpp cs:#1=#2,%
        \ifx#1x y=\i,z=#6 \fi%
        \ifx#1y x=\i,z=#6 \fi%
        \ifx#1z x=\i,y=#6 \fi);
  }

  \foreach \j in {#5,...,#6} {
    \draw[very thin, gray]
      (tpp cs:#1=#2,%
        \ifx#1x y=#3,z=\j \fi%
        \ifx#1y x=#3,z=\j \fi%
        \ifx#1z x=#3,y=\j \fi) --
      (tpp cs:#1=#2,%
        \ifx#1x y=#4,z=\j \fi%
        \ifx#1y x=#4,z=\j \fi%
        \ifx#1z x=#4,y=\j \fi);
  }

  % Axe 1
  \draw[thick,line width=0.8ex,->,>=Stealth ] 
    (tpp cs:#1=#2,%
      \ifx#1x y=#3,z=#5 \fi%
      \ifx#1y x=#3,z=#5 \fi%
      \ifx#1z x=#3,y=#5 \fi) --
    (tpp cs:#1=#2,%
      \ifx#1x y=#4,z=#5 \fi%
      \ifx#1y x=#4,z=#5 \fi%
      \ifx#1z x=#4,y=#5 \fi);

  % Axe 2
  \draw[thick,line width=0.8ex,->,>=Stealth ] 
    (tpp cs:#1=#2,%
      \ifx#1x y=#3,z=#5 \fi%
      \ifx#1y x=#3,z=#5 \fi%
      \ifx#1z x=#3,y=#5 \fi) --
    (tpp cs:#1=#2,%
      \ifx#1x y=#3,z=#6 \fi%
      \ifx#1y x=#3,z=#6 \fi%
      \ifx#1z x=#3,y=#6 \fi);

 % Graduation sur axe 1 (avec petit trait)
\foreach \i in {#3,...,#4} {     
   \draw[
  	]
      (tpp cs:#1=#2,%
        \ifx#1x y=\i,z=\itraiminus \fi%
        \ifx#1y x=\i,z=\itraiminus \fi%
        \ifx#1z x=\i,y=\itraiminus \fi) edge[line width=0.8ex] node[pos = -0.1  ] {\i}
      (tpp cs:#1=#2,%
        \ifx#1x y=\i,z=\itraiplus \fi%
        \ifx#1y x=\i,z=\itraiplus \fi%
        \ifx#1z x=\i,y=\itraiplus \fi);
}


  % Graduation axe 2
  \foreach \j in {#5,...,#6} {
  	 % Petit trait de graduation
  \draw[
  	]
      (tpp cs:#1=#2,%
        \ifx#1x z=\j,y=\jtraiminus \fi%
        \ifx#1y z=\j,x=\jtraiminus \fi%
        \ifx#1z y=\j,x=\jtraiminus \fi) edge[line width=0.8ex] node[pos = -0.1 ] {\j}
      (tpp cs:#1=#2,%
        \ifx#1x z=\j,y=\jtraiplus \fi%
        \ifx#1y z=\j,x=\jtraiplus \fi%
        \ifx#1z y=\j,x=\jtraiplus \fi);
}

  \end{scope}
}


\begin{tikzpicture}
%\drawgrid{-2}{2}{-2}{2}
\begin{scope}[
  3d view={-45}{35.26},
  perspective={
    p = {(10,0,0)},
    q = {(0,10,0)},
    r = {(0,0,20)}},
  scale=4,
  vanishing point/.style={fill,circle,inner sep=2pt}]
  
  	
  
	\drawgridxyz{z}{-2}{-2.}{2.}{-2.}{2.}
	\drawgridxyz{x}{2}{-2}{2}{-2}{2}
	\drawgridxyz{y}{2}{-2}{2}{-2}{2}
	%\drawgridxyz{x}{0}{0}{5}{0}{3}
	\simpleaxes{2}{2}{2}
	\begin{scope}[shift={
  		(tpp cs: x = 0 , y = 0 , z = -2 )
  		}]
	\simplecuboid{1}{1}{1}
	\end{scope}


  \node[vanishing point,label = right:p] (p) at (10,0,0){};
  \node[vanishing point,label = left:q] (q) at (0,10,0){};
  \node[vanishing point,label = above:r] (r) at (0,0,20){};

  \begin{scope}[dotted]
    \foreach \y in {0,1}{
      \foreach \z in {0,1}{
        \draw (tpp cs:x=0,y=\y,z=\z) -- (p.center);}}
    \foreach \x in {0,1}{
      \foreach \z in {0,1}{
        \draw (tpp cs:x=\x,y=0,z=\z) -- (q.center);}}
    \foreach \x in {0,1}{
      \foreach \y in {0,1}{
        \draw (tpp cs:x=\x,y=\y,z=0) -- (r.center);}}
  \end{scope}
\end{scope}
\end{tikzpicture}



\end{document}
